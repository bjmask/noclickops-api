<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NoClickOps Docs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <style>
    body { margin:0; font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background:#0f172a; color:#e5e7eb; }
    header { padding:16px 24px; background:#111827; border-bottom:1px solid rgba(255,255,255,0.05); display:flex; align-items:center; justify-content:space-between; }
    .brand { font-weight:800; letter-spacing:0.4px; }
    main { display:grid; grid-template-columns: 240px 1fr; min-height: calc(100vh - 60px); }
    nav { background:#0b1220; border-right:1px solid rgba(255,255,255,0.05); padding:16px; }
    nav a { display:block; color:#e5e7eb; text-decoration:none; padding:8px 10px; border-radius:10px; margin-bottom:6px; }
    nav a:hover { background:rgba(255,255,255,0.05); }
    #content { padding:24px; overflow:auto; }
    pre { background:#0b1220; border:1px solid rgba(34,211,238,0.2); padding:12px; border-radius:10px; overflow:auto; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
    code { color:#e5e7eb; font-family: "SFMono-Regular", Menlo, Consolas, monospace; }
    pre code { display:block; }
    code.language-hcl, code.language-terraform { color:#a5b4fc; }
    .muted { color:#9ca3af; }
  </style>
</head>
<body>
  <header>
    <div class="brand">NoClickOps</div>
    <div class="muted">Docs</div>
  </header>
  <main>
    <nav>
      <a href="#" onclick="toggleSub('aws-sub'); return false;">AWS â–¼</a>
      <div id="aws-sub" style="padding-left:10px; display:none;">
        <a href="#" onclick="loadDoc('aws-cli.md'); return false;">CLI</a>
        <a href="#" onclick="loadDoc('aws-terraform.md'); return false;">Terraform</a>
      </div>
      <a href="#" onclick="loadDoc('gcp.md'); return false;">GCP (coming soon)</a>
      <a href="#" onclick="loadDoc('azure.md'); return false;">Azure (coming soon)</a>
      <a href="/dashboard.html">Back to dashboard</a>
    </nav>
    <div id="content" class="muted">Select a doc to view.</div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/hcl.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/terraform.min.js"></script>
  <script>
    marked.setOptions({
      highlight: function(code, lang) {
        if (lang && hljs.getLanguage(lang)) {
          return hljs.highlight(code, {language: lang}).value;
        }
        return hljs.highlightAuto(code).value;
      }
    });

    function toggleSub(id) {
      const el = document.getElementById(id);
      if (!el) return;
      el.style.display = el.style.display === "none" ? "block" : "none";
    }

    async function loadDoc(file, anchor) {
      try {
        let res = await fetch(`/docs/assets/${file}`);
        if (!res.ok) {
          res = await fetch(`/docs/md/${file}`);
        }
        if (!res.ok) {
          throw new Error(`Failed to load ${file}`);
        }
        const text = await res.text();
        document.getElementById("content").innerHTML = marked.parse(text);
        document.querySelectorAll('pre code').forEach((block) => {
          hljs.highlightElement(block);
        });
        if (anchor) {
          const el = document.getElementById(anchor);
          if (el) el.scrollIntoView({behavior:"smooth"});
        }
      } catch (e) {
        document.getElementById("content").innerHTML = `<div class="muted">Failed to load ${file}</div>`;
      }
    }
  </script>
</body>
</html>
